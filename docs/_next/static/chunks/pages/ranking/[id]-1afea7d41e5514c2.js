(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4634],{1787:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ranking/[id]",function(){return t(4599)}])},9972:function(n,e,t){"use strict";t.d(e,{Z:function(){return d}});var s=t(5893),r=t(1555),i=t(5213),c=t(5738),a=t(4051),o=t(231);function d(){return(0,s.jsx)(c.Z,{bg:"dark",className:"mt-auto justify-content-center rounded text-light",children:(0,s.jsx)(i.Z,{variant:"underline",children:(0,s.jsxs)(a.Z,{children:[(0,s.jsxs)(r.Z,{className:"px-5",children:[(0,s.jsx)("h3",{children:"Developer"}),(0,s.jsx)(i.Z.Link,{className:"ms-1 p-0",href:"https://github.com/cartesi",children:(0,s.jsxs)("span",{className:"d-flex align-items-center",children:[(0,s.jsx)(o.hJX,{})," ",(0,s.jsx)("span",{className:"ms-1",children:"Github"})]})}),(0,s.jsxs)(i.Z.Link,{className:"ms-1 p-0",href:"https://docs.cartesi.io/",children:[(0,s.jsx)("img",{src:"/cartesi.jpg",width:16,className:"me-1 align-baseline"}),"Documentation"]})]}),(0,s.jsxs)(r.Z,{className:"px-5",children:[(0,s.jsx)("h3",{children:"Community"}),(0,s.jsx)(i.Z.Link,{className:"ms-1 p-0",href:"https://discord.gg/VCbnrbrh",children:(0,s.jsxs)("span",{className:"d-flex align-items-center",children:[(0,s.jsx)(o.j2d,{})," ",(0,s.jsx)("span",{className:"ms-1",children:"Discord"})]})}),(0,s.jsx)(i.Z.Link,{className:"ms-1 p-0",href:"https://twitter.com/cartesiproject?s=20",children:(0,s.jsxs)("span",{className:"d-flex align-items-center",children:[(0,s.jsx)(o.fWC,{})," ",(0,s.jsx)("span",{className:"ms-1",children:"Twitter"})]})})]})]})})})}},8376:function(n,e,t){"use strict";t.d(e,{Z:function(){return u}});var s=t(5893),r=t(132),i=t(7294),c=t(5005),a=t(5213),o=t(5738),d=t(478),l=t(2585);function u(n){let{activeKey:e}=n,[{wallet:t,connecting:u},h,p]=(0,r.Or)(),[x,j]=(0,i.useState)((0,s.jsx)(s.Fragment,{}));return(0,i.useEffect)(()=>{j((0,s.jsx)(c.Z,{variant:"outline-light",className:"position-absolute bottom-0 end-0 m-2",onClick:()=>t?p(t):h(),children:u?"Connecting":t?"Disconnect":"Connect Wallet"}))},[t,u]),(0,s.jsxs)(o.Z,{bg:"dark",className:"mb-3 rounded sticky-top position-relative",children:[(0,s.jsxs)(d.Z,{gap:1,children:[(0,s.jsxs)(o.Z.Brand,{href:"/",className:"d-flex justify-content-center",children:[(0,s.jsx)("img",{className:"header-image-left",alt:"Cartesi Arcade Image",src:"/controlls.png",width:"60",height:"60"}),(0,s.jsx)("h1",{className:"text-light m-2",children:"World Arcade"}),(0,s.jsx)("img",{className:"header-image-right",alt:"Cartesi Arcade Image",src:"/controlls.png",width:"60",height:"60"})]}),(0,s.jsxs)(a.Z,{variant:"underline",className:"justify-content-center",activeKey:e,children:[(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(a.Z.Link,{href:"/",children:"Games"})}),(0,s.jsx)(a.Z.Item,{children:(0,s.jsxs)(a.Z.Link,{href:"/upload",children:["Upload",(0,s.jsx)("span",{className:"ms-1",children:(0,s.jsx)(l.BDG,{})})]})})]})]}),x]})}},5808:function(n,e,t){"use strict";t.d(e,{U3:function(){return j},ib:function(){return f},uz:function(){return m}});var s=t(2729),r=t(8461);function i(){let n=(0,s._)(["\n    query notice($noticeIndex: Int!, $inputIndex: Int!) {\n  notice(noticeIndex: $noticeIndex, inputIndex: $inputIndex) {\n    index\n    input {\n      index\n      payload\n    }\n    payload\n    proof {\n      validity {\n        inputIndex\n        outputIndex\n        outputHashesRootHash\n        vouchersEpochRootHash\n        noticesEpochRootHash\n        machineStateHash\n        keccakInHashesSiblings\n        outputHashesInEpochSiblings\n      }\n      context\n    }\n  }\n}\n    "]);return i=function(){return n},n}function c(){let n=(0,s._)(["\n    query notices {\n  notices {\n    edges {\n      node {\n        index\n        input {\n          index\n          payload\n        }\n        payload\n      }\n    }\n  }\n}\n    "]);return c=function(){return n},n}function a(){let n=(0,s._)(["\n    query noticesByInput($inputIndex: Int!) {\n  input(index: $inputIndex) {\n    notices {\n      edges {\n        node {\n          index\n          input {\n            index\n          }\n          payload\n        }\n      }\n    }\n  }\n}\n    "]);return a=function(){return n},n}function o(){let n=(0,s._)(["\n    query voucher($voucherIndex: Int!, $inputIndex: Int!) {\n  voucher(voucherIndex: $voucherIndex, inputIndex: $inputIndex) {\n    index\n    input {\n      index\n      payload\n    }\n    destination\n    payload\n    proof {\n      validity {\n        inputIndex\n        outputIndex\n        outputHashesRootHash\n        vouchersEpochRootHash\n        noticesEpochRootHash\n        machineStateHash\n        keccakInHashesSiblings\n        outputHashesInEpochSiblings\n      }\n      context\n    }\n  }\n}\n    "]);return o=function(){return n},n}function d(){let n=(0,s._)(["\n    query vouchers {\n  vouchers {\n    edges {\n      node {\n        index\n        input {\n          index\n          payload\n        }\n        destination\n        payload\n      }\n    }\n  }\n}\n    "]);return d=function(){return n},n}function l(){let n=(0,s._)(["\n    query vouchersByInput($inputIndex: Int!) {\n  input(index: $inputIndex) {\n    vouchers {\n      edges {\n        node {\n          index\n          input {\n            index\n          }\n          destination\n          payload\n        }\n      }\n    }\n  }\n}\n    "]);return l=function(){return n},n}function u(){let n=(0,s._)(["\n    query report($reportIndex: Int!, $inputIndex: Int!) {\n  report(reportIndex: $reportIndex, inputIndex: $inputIndex) {\n    index\n    input {\n      index\n      payload\n    }\n    payload\n  }\n}\n    "]);return u=function(){return n},n}function h(){let n=(0,s._)(["\n    query reports {\n  reports {\n    edges {\n      node {\n        index\n        input {\n          index\n          payload\n        }\n        payload\n      }\n    }\n  }\n}\n    "]);return h=function(){return n},n}function p(){let n=(0,s._)(["\n    query reportsByInput($inputIndex: Int!) {\n  input(index: $inputIndex) {\n    reports {\n      edges {\n        node {\n          index\n          input {\n            index\n          }\n          payload\n        }\n      }\n    }\n  }\n}\n    "]);return p=function(){return n},n}function x(){let n=(0,s._)(["\n    query getInput($inputIndex: Int!) {\n  input(index: $inputIndex) {\n    reports {\n      edges {\n        node {\n          index\n          input {\n            index\n          }\n          payload\n        }\n      }\n    }\n    notices {\n      edges {\n        node {\n          index\n          input {\n            index\n          }\n          payload\n        }\n      }\n    }\n  }\n}\n    "]);return x=function(){return n},n}(0,r.ZP)(i());let j=(0,r.ZP)(c()),m=(0,r.ZP)(a());(0,r.ZP)(o()),(0,r.ZP)(d()),(0,r.ZP)(l()),(0,r.ZP)(u()),(0,r.ZP)(h()),(0,r.ZP)(p());let f=(0,r.ZP)(x())},6316:function(n,e,t){"use strict";t.d(e,{X8:function(){return a},nN:function(){return c},xD:function(){return o}});var s=t(9251),r=t(6441);async function i(n){let e=null,t=await fetch(n,{method:"GET",mode:"cors"});if(200==t.status){let n=await t.json(),r=s.ZN(n.reports[0].payload);try{e=JSON.parse(r)}catch(n){console.log(n)}}return e}let c=async n=>{let e="".concat("http://localhost:8080/inspect","/cartridges/").concat(n);return await i(e)},a=async n=>{let e="".concat("http://localhost:8080/inspect","/cartridges/").concat(n,"/cartridge"),t=await fetch(e,{method:"GET",mode:"cors"}),s="0x";if(200==t.status){let n=await t.json();try{for(let e=0;e<n.reports.length;e++)s=s.concat(n.reports[e].payload.substring(2))}catch(n){console.log(n)}}return r.lE(s)},o=async()=>{let n=await fetch("".concat("http://localhost:8080/inspect","/cartridges"),{method:"GET",mode:"cors"});if(200!=n.status)return[];let e=await n.json(),t="0x";for(let n=0;n<e.reports.length;n++)t=t.concat(e.reports[n].payload.substring(2));return JSON.parse(s.ZN(t))}},4599:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return k}});var s=t(5893),r=t(9972),i=t(8376),c=t(7294),a=t(5005),o=t(6196),d=t(755),l=t(5147),u=t(2585),h=t(9352);function p(n){let{ranking:e}=n,[t,r]=(0,c.useState)([]);return 0==e.length?(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h1",{children:"Be the first to play!"})}):((0,c.useEffect)(()=>{r(Object.keys(e[0].outcard_json))},[]),(0,s.jsxs)(l.Z,{variant:"dark",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"#"}),(0,s.jsx)("th",{children:"User"}),t.map(n=>(0,s.jsx)("th",{children:n},n)),(0,s.jsx)("th",{children:"Timestamp"})]})}),(0,s.jsx)("tbody",{children:e.map((n,r)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:0==r?(0,s.jsx)(u.iue,{}):1==r?(0,s.jsx)(u.rje,{}):2==r?(0,s.jsx)(u.Q4M,{}):r+1}),(0,s.jsx)("td",{children:n.player_id}),t.map((t,r)=>{if("object"==typeof n.outcard_json[t]){let e=function(n){if(0==n.length)return;let e=Object.keys(n[0]);return(0,s.jsx)(d.Z,{children:(0,s.jsx)(d.Z.Body,{className:"",children:(0,s.jsxs)(l.Z,{className:"m-0",striped:!0,size:"sm",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:e.map(n=>(0,s.jsx)("th",{children:n},n))})}),(0,s.jsx)("tbody",{children:n.map((n,t)=>(0,s.jsx)("tr",{children:e.map(e=>(0,s.jsx)("td",{children:n[e]},"".concat(e,"-").concat(n[e])))},t))})]})})})}(n.outcard_json[t]);return e?(0,s.jsx)("td",{children:(0,s.jsx)(o.Z,{trigger:"click",placement:"bottom",overlay:e,children:(0,s.jsxs)(a.Z,{className:"p-1",variant:"outline-light",children:[Object.keys(n.outcard_json[t]).toString()," ",(0,s.jsx)(h.Z5q,{})]})})},r):(0,s.jsx)("td",{children:"-"})}return"score"==t&&(n.outcard_json[t]=function(n,e){let t=n.toString(),s=e.toString();return"0".repeat(t.length-s.length)+s}("max_score"in e[0].outcard_json?e[0].outcard_json.max_score:e[0].outcard_json.score,n.outcard_json.score)),(0,s.jsx)("td",{children:n.outcard_json[t].toString()},r)}),(0,s.jsx)("td",{children:new Date(1e3*n.timestamp).toLocaleString()})]},r))})]}))}var x=t(9934),j=t(4098),m=t.n(j),f=t(5808);let g=n=>null!==n,y=async(n,e)=>{var t,s,r;let i=(0,x.eI)({url:n,exchanges:[x.Ek],fetch:m()});if(console.log("querying ".concat(n,' for notices of input index "').concat(e,'"...')),void 0!==e){let{data:n,error:r}=await i.query(f.uz,{inputIndex:e}).toPromise();return(null==n?void 0:null===(s=n.input)||void 0===s?void 0:null===(t=s.notices)||void 0===t?void 0:t.edges)?n.input.notices.edges.filter(g).map(n=>n.node):[]}{let{data:n,error:e}=await i.query(f.U3,{}).toPromise();return(null==n?void 0:null===(r=n.notices)||void 0===r?void 0:r.edges)?n.notices.edges.filter(g).map(n=>n.node):[]}};var I=t(6316),v=t(1163),N=t(682),_=t(6968),Z=t(6225);async function b(n){let e=await y("http://localhost:8080/graphql"),t=[];for(let s=0;s<e.length;s++)try{let r=function(n){let e=JSON.parse(window.decodeVerifyReplayNotice(n)).Array,t={cartridge_id:e[0],player_id:e[1],timestamp:e[2],valid:e[3],outcard_data:e[4],outcard_json:{},score:0};return"JSON"==t.outcard_data.substring(0,4)&&(t.outcard_json=JSON.parse(t.outcard_data.substring(4)),"score"in t.outcard_json&&(t.score=t.outcard_json.score)),t}(e[s].payload);r.cartridge_id==n&&r.valid&&function(n,e){let t=0;for(;t<n.length&&n[t].score>e.score;)t++;n.splice(t,0,e)}(t,r)}catch(n){console.log(n.message)}return t}function k(){let n=(0,v.useRouter)(),[e,t]=(0,c.useState)(""),[o,d]=(0,c.useState)(),[l,u]=(0,c.useState)(null);return(0,c.useEffect)(()=>{if(n.isReady&&n.query.id){let e="string"==typeof n.query.id?n.query.id:n.query.id[0];t(e),b(e).then(n=>{u(n)}),(0,I.nN)(e).then(n=>{n&&d(n)})}},[n.isReady]),(0,s.jsxs)(N.Z,{id:"page-container",children:[(0,s.jsx)(i.Z,{activeKey:""}),(0,s.jsxs)(N.Z,{className:"bg-dark text-light rounded",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)(a.Z,{className:"me-2",title:"back to game page",variant:"outline-light mt-2",onClick:()=>{n.push("/cartridge/".concat(e))},children:(0,s.jsx)(Z.A_U,{})}),(0,s.jsx)("h1",{className:"m-0",children:null==o?void 0:o.info.name})]}),l?(0,s.jsx)(p,{ranking:l}):(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(_.Z,{className:"my-2",animation:"border",variant:"light",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]}),(0,s.jsx)(r.Z,{})]})}}},function(n){n.O(0,[4980,1778,5937,7627,6243,5127,4718,9774,2888,179],function(){return n(n.s=1787)}),_N_E=n.O()}]);